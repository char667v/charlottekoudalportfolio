---
// Import af nødvendige billeder
import { Image } from 'astro:assets'; 
import animationImage from "../images/animation.webp"; 
import atkImage from "../images/atk.webp"; 
import dcdImage from "../images/dcd.webp"; 
import itmvImage from "../images/itmv.webp"; 
import portfolioImage from "../images/portfolio.webp"; 
---

<div class="photos-section">
    <div class="drag-area">
        <div class="cards cursor-grab absolute" style="top: 623px; left: 250px;" data-url="https://your-link-here.com">
            <article id="card1">
                <Image src={animationImage} alt="Cover for mit animationsspil" class="rounded-lg transition-all duration-300 hover:grayscale-0" style="width: 300px; height: auto;" />
            </article>
        </div>

        <div class="cards cursor-grab absolute" style="top: 650px; left: 1086px;" data-url="https://atk-website.netlify.app/">
            <article id="card2">
                <Image src={atkImage} alt="Cover for mit Arbejdernes Tennis Klub" class="rounded-lg transition-all duration-300 hover:grayscale-0 shadow-[0_4px_15px_rgba(255,255,0,0.8)]" style="width: 250px; height: auto;" />
            </article>
        </div>

        <div class="cards cursor-grab absolute" style="top: 515px; left: 646px;" data-url="https://digitalskraldedaggr4.netlify.app">
            <article id="card3">
                <Image src={dcdImage} alt="Cover for Digital cleanup day" class="rounded-lg transition-all duration-300 hover:grayscale-0 shadow-[0_4px_15px_rgba(255,255,0,0.8)]" style="width: 500px; height: auto;" />
            </article>
        </div>

        <div class="cards cursor-grab absolute" style="top: 678px; left: 500px;" data-url="https://your-link-here.com">
            <article id="card4">
                <Image src={itmvImage} alt="Cover for I tråd med verden" class="rounded-lg transition-all duration-300 hover:grayscale-0 shadow-[0_4px_15px_rgba(255,255,0,0.8)]" style="width: 200px; height: auto;" />
            </article>
        </div>

        <div class="cards cursor-grab absolute" style="top: 705px; left: 104px;" data-url="https://your-link-here.com">
            <article id="card5">
                <Image src={portfolioImage} alt="Cover for min portfolio" class="rounded-lg transition-all duration-300 hover:grayscale-0 shadow-[0_4px_15px_rgba(255,255,0,0.8)]" style="width: 150px; height: auto;" />
            </article>
        </div>
    </div>
</div>

<style>
    .cards {
        position: absolute;
    }
    .drag-area {
        height: 100vh;
        width: 100vw;
    }
</style>

<script>
   const draggables = document.querySelectorAll('.cards');

   draggables.forEach(draggable => {
       let linkUrl = draggable.getAttribute('data-url'); // Hent URL fra data-attribut
       let isDragging = false; // Sporing af om der bliver draget

       draggable.addEventListener('mousedown', (e) => {
           e.preventDefault(); // Forhindre standardadfærd

           const dragArea = document.querySelector('.drag-area');
           const dragAreaRect = dragArea.getBoundingClientRect();

           // Indstil offsets i forhold til musens position
           const offsetX = e.clientX - draggable.getBoundingClientRect().left;
           const offsetY = e.clientY - draggable.getBoundingClientRect().top;

           draggable.style.cursor = 'grabbing'; // Ændre cursor ved drag

           function mouseMoveHandler(e) {
               e.preventDefault();
               isDragging = true; // Sæt drag til sand

               // Beregn ny position
               let newX = e.clientX - offsetX;
               let newY = e.clientY - offsetY;

               // Begræns positionen inden for drag området
               newX = Math.max(0, Math.min(newX, dragAreaRect.width - draggable.offsetWidth));
               newY = Math.max(0, Math.min(newY, dragAreaRect.height - draggable.offsetHeight));

               draggable.style.left = newX + 'px';
               draggable.style.top = newY + 'px';
           }

           function mouseUpHandler() {
               draggable.style.cursor = 'grab'; // Reset cursor
               document.removeEventListener('mousemove', mouseMoveHandler);
               document.removeEventListener('mouseup', mouseUpHandler);

               // Tjek om det var et klik, hvis ikke, åbner ikke linket
               if (!isDragging) {
                   window.open(linkUrl, '_blank'); // Åbn link i nyt vindue
               }
               isDragging = false; // Reset drag state
           }

           document.addEventListener('mousemove', mouseMoveHandler);
           document.addEventListener('mouseup', mouseUpHandler);
       });
   });
</script>
